{"meta":{"title":"DJ1-1 1vU","subtitle":"","description":"","author":"ğŸ˜ˆRay","url":"http://hashZzz.github.io","root":"/"},"pages":[{"title":"guestbook","date":"2022-05-08T11:24:51.000Z","updated":"2022-05-08T11:25:08.117Z","comments":true,"path":"guestbook/index.html","permalink":"http://hashzzz.github.io/guestbook/index.html","excerpt":"","text":""},{"title":"tags","date":"2022-05-08T11:21:28.000Z","updated":"2022-05-08T11:23:34.061Z","comments":false,"path":"tags/index.html","permalink":"http://hashzzz.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Mapã€WeakMapã€Setã€WeakSet","slug":"MapVsWeakMap","date":"2024-05-29T13:37:10.000Z","updated":"2024-05-29T12:55:39.595Z","comments":true,"path":"2024/05/29/MapVsWeakMap/","link":"","permalink":"http://hashzzz.github.io/2024/05/29/MapVsWeakMap/","excerpt":"","text":"ES6ä¸­æ–°å¢äº†Mapã€Setã€WeakMapã€WeakSetå‡ ä¸ªæ•°æ®ç»“æ„ï¼Œä»–ä»¬å„è‡ªéƒ½æœ‰ä¸åŒçš„ç‰¹ç‚¹å’Œä½¿ç”¨åœºæ™¯ Mapæ˜¯ä¸€ç§é”®å€¼å¯¹ç»“æ„çš„æ•°æ®é›†åˆï¼Œè¡¨ç°ä¸ºKey-Valueçš„å½¢å¼ï¼Œ è¿™é‡Œçš„Keyå¯ä»¥æ˜¯ä»»æ„å€¼ä½†æ˜¯ä¸èƒ½é‡å¤ ä¸‹é¢æ˜¯mapçš„è®¾ç½®ã€å–å€¼ã€æŸ¥è¯¢ã€åˆ é™¤ã€æ¸…ç©ºå‡ ä¸ªæ“ä½œï¼Œéå†æ–¹æ³•ä¼šæ”¾åˆ°Setä¹‹åä¸€å¹¶ä»‹ç» 12345678let map = new Map();map.set(&#x27;name&#x27;, &#x27;Alice&#x27;);const name = map.get(&#x27;name&#x27;);map.has(&#x27;name&#x27;)map.delete(&#x27;name&#x27;);map.clear(); Setå‘¢æ˜¯ä¸€ç§å­˜å‚¨å”¯ä¸€å€¼çš„ç»“æ„ï¼Œé€‚ç”¨äºå­˜å‚¨ä¸é‡å¤å…ƒç´ çš„åœºæ™¯ï¼Œæ— åºã€ä¸é‡å¤ã€å€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹ 123456789101112131415let set = new Set();set.add(1);set.add(2);set.add(2); // å°è¯•æ·»åŠ é‡å¤å€¼console.log(set.has(1)); // è¾“å‡º: trueconsole.log(set.size); // è¾“å‡º: 2set.delete(2);console.log(set.size); // è¾“å‡º: 1set.clear();console.log(set.size); // è¾“å‡º: 0 ä¸€èˆ¬ä¼šç”¨æ¥å­˜ä¸€äº›æšä¸¾å€¼ åæ ‡ç‚¹ä½è¾ƒå¤š WeakMapä¸Map WeakMap æ˜¯ä¸€ç§å¼±å¼•ç”¨çš„é”®å€¼å¯¹ç±»å‹ï¼Œé”®åªèƒ½æ˜¯å¯¹è±¡ï¼Œä¸”å¦‚æœå¯¹è±¡æ²¡æœ‰è¢«å¼•ç”¨ï¼Œé‚£ä¹ˆå°±ä¼šè¢«åƒåœ¾å›æ”¶å¤„ç†æ‰ï¼ŒWeakMapä¹Ÿä¸èƒ½æšä¸¾ï¼Œæ— æ³•ä½¿ç”¨forEachï¼Œkeysï¼Œvaluesï¼Œentriesç­‰æ–¹æ³•ï¼Œä¸€èˆ¬ç”¨Domä½œä¸ºé”®æ¯”è¾ƒåœºæ™¯ï¼Œå½“Domç§»é™¤ä¹‹åä¼šè‡ªåŠ¨æ¸…ç† WeakSetåŒç†","categories":[],"tags":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"http://hashzzz.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"}]},{"title":"canvas-water-print","slug":"canvas-water-print","date":"2024-05-29T13:37:10.000Z","updated":"2024-05-29T12:29:18.764Z","comments":true,"path":"2024/05/29/canvas-water-print/","link":"","permalink":"http://hashzzz.github.io/2024/05/29/canvas-water-print/","excerpt":"","text":"Canvasç”Ÿäº§base64çš„æ°´å° 123456789101112131415161718192021function setWaterPrint(str, elem, fs, color)&#123; var canvas = document.createElement(&#x27;canvas&#x27;); if(elem &amp;&amp; elem.nodeType) &#123; elem.appendChild(canvas); &#125; else &#123; return console.error(&quot;Invalid Target&quot;) &#125; canvas.width = 250; canvas.height = 200; canvas.style.display = &#x27;none&#x27;; var ctx = canvas.getContext(&#x27;2d&#x27;); ctx.rotate( (Math.PI * - 10) / 180 ); ctx.font = fs || &#x27;16px Microsoft YaHei&#x27;; ctx.fillStyle = color || &#x27;rgba(200,200,200, 0.3)&#x27;; ctx.textAlign = &#x27;center&#x27; ctx.textBaseline = &#x27;Middle&#x27;; ctx.fillText(str, canvas.width / 10, canvas.height / 2); elem.style.backgroundImage = &quot;url(&quot; + can.toDataURL(&quot;image/png&quot;) + &quot;)&quot;&#125; åŠŸèƒ½å¢å¼ºï¼Œé˜²æ­¢ç”¨æˆ·åˆ é™¤Elementå…ƒç´  ä½¿ç”¨Classå°è£… 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960class WaterMark &#123; constructor(el, content) &#123; this.el = el; this.content = content; this.observer = null; this.config = &#123; attributes: true, childList: true, subtree: true &#125;; this.init(); &#125; init() &#123; this.createContext(this.el); &#125; createContext(elem) &#123; const &#123; offsetWidth, offsetHeight &#125; = elem; const canvas = document.createElement(&quot;canvas&quot;); const ctx = canvas.getContext(&quot;2d&quot;); canvas.width = offsetWidth; canvas.height = offsetHeight; canvas.style.position = &quot;absolute&quot;; canvas.style.pointerEvents = &quot;none&quot;; canvas.style.top = &quot;0px&quot;; canvas.style.left = &quot;0px&quot;; canvas.style.zIndex = &quot;99&quot;; ctx.font = &quot;24px serif&quot;; ctx.rotate((-20 * Math.PI) / 180); ctx.fillStyle = &quot;rgba(180, 180, 180, 0.6)&quot;; ctx.textAlign = &quot;left&quot;; ctx.textBaseline = &quot;middle&quot;; // å¾ªç¯åœ¨canvasä¸­æ¸²æŸ“ for (let i = 0; i &lt; canvas.width / 100; i++) &#123; for (let j = 0; j &lt; canvas.height / 50; j++) &#123; ctx.fillText(this.content, i * 200, j * 100 + 20); &#125; &#125; elem.appendChild(canvas); this.createObserver(elem); // æ·»åŠ ç›‘å¬ &#125; createObserver(elem) &#123; if (this.observer) this.observer.disconnect(); this.observer = new MutationObserver((changeList, watcher) =&gt; &#123; Array.from(changeList).forEach((record) =&gt; &#123; const &#123; removedNodes &#125; = record; const removeNodeNames = Array.from(removedNodes).map( (node) =&gt; node.nodeName ); if (removeNodeNames.includes(&quot;CANVAS&quot;)) &#123; window.requestIdleCallback(() =&gt; this.createContext(elem), &#123; timeout: 300, &#125;); &#125; &#125;); &#125;); this.observer.observe(elem, this.config); &#125;&#125;const elem = document.getElementById(&quot;content&quot;);const waterMark = new WaterMark(elem, &quot;hello, world&quot;);","categories":[],"tags":[{"name":"Canvas","slug":"Canvas","permalink":"http://hashzzz.github.io/tags/Canvas/"}]},{"title":"å°è£…ä¸€ä¸ªFetchClient","slug":"Fetch","date":"2024-05-29T13:37:10.000Z","updated":"2024-06-08T06:05:22.596Z","comments":true,"path":"2024/05/29/Fetch/","link":"","permalink":"http://hashzzz.github.io/2024/05/29/Fetch/","excerpt":"","text":"Fetch 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122export interface IRequestData extends RequestInit &#123; method: &#x27;GET&#x27; | &#x27;POST&#x27; | &#x27;PUT&#x27; | &quot;DELETE&quot; | &#x27;OPTIONS&#x27; headers?: Record&lt;string, string&gt; body?: string, timeout?: number&#125;// è¯·æ±‚æ‹¦æˆªå™¨è¿”å›çš„æ˜¯ä¸€ä¸ªPromise æ–°çš„é…ç½®type RequestInterceptor = (url: string, options: IRequestData) =&gt; Promise&lt;[string, IRequestData]&gt; | [string, IRequestData];// å“åº”è¿”å›çš„æ˜¯ä¸€ä¸ªæ³›å‹type ResponseInterceptor&lt;T&gt; = (response: T, options: IRequestData) =&gt; Promise&lt;T&gt; | T;export default class HttpClient &#123; private defaultTimeout: number; private requestInterceptors: RequestInterceptor[]; private responseInterceptors: ResponseInterceptor&lt;any&gt;[]; constructor(defaultTimeout: number = 10000) &#123; this.defaultTimeout = defaultTimeout; this.requestInterceptors = []; this.responseInterceptors = []; &#125; // æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨ public addRequestInterceptor(interceptor: RequestInterceptor): void &#123; this.requestInterceptors.push(interceptor); &#125; // æ·»åŠ å“åº”æ‹¦æˆªå™¨ public addResponseInterceptor&lt;T&gt;(interceptor: ResponseInterceptor&lt;T&gt;): void &#123; this.responseInterceptors.push(interceptor); &#125; private async applyRequestInterceptors(url: string, options: IRequestData): Promise&lt;[string, IRequestData]&gt; &#123; let result: [string, IRequestData] = [url, options]; for (const interceptor of this.requestInterceptors) &#123; result = await interceptor(...result); &#125; return result; &#125; private async applyResponseInterceptors&lt;T&gt;(response: T, options: IRequestData): Promise&lt;T&gt; &#123; let result = response; for (const interceptor of this.responseInterceptors) &#123; result = await interceptor(result, options); &#125; return result; &#125; // fetch åé¢çš„&lt;T&gt;è¡¨ç¤ºæ¥å—ä¸€ä¸ª&lt;T&gt;ç±»å‹ åé¢çš„Promise&lt;T&gt;æ˜¯ä¸€ä¸ªè¿”å›ç±»å‹ public async fetch&lt;T&gt;(url: string, options: IRequestData): Promise&lt;T&gt; &#123; const &#123; timeout = this.defaultTimeout, ...fetchOptions &#125; = options; const [interceptedUrl, interceptedOptions] = await this.applyRequestInterceptors(url, &#123; timeout, ...fetchOptions &#125;); return new Promise&lt;T&gt;((resolve, reject) =&gt; &#123; const controller = new AbortController(); const signal = controller.signal; interceptedOptions.signal = signal; const timer = setTimeout(() =&gt; &#123; controller.abort(); reject(new Error(&#x27;è¯·æ±‚è¶…æ—¶&#x27;)); &#125;, timeout); fetch(interceptedUrl, interceptedOptions) .then(async response =&gt; &#123; clearTimeout(timer); if (!response.ok) &#123; const errorText = await response.text(); reject(new Error(errorText || &#x27;è¯·æ±‚å¤±è´¥&#x27;)); &#125; else &#123; const jsonResponse = await response.json(); const interceptedResponse = await this.applyResponseInterceptors(jsonResponse, interceptedOptions); resolve(interceptedResponse as T); &#125; &#125;) .catch(error =&gt; &#123; if (error.name === &#x27;AbortError&#x27;) &#123; reject(new Error(&#x27;è¯·æ±‚è¢«ä¸­æ­¢&#x27;)); &#125; else &#123; reject(error); &#125; &#125;); &#125;); &#125; public cancel(controller: AbortController): void &#123; controller.abort(); &#125; // åˆ›å»ºä¸€ä¸ªæ–°çš„ AbortController å®ä¾‹çš„æ–¹æ³• public createAbortController(): AbortController &#123; return new AbortController(); &#125;&#125;// ä»£ç ä½¿ç”¨import HttpClient, &#123; IRequestData &#125; from &quot;./fetch&quot;;import &#123; IApiResponse &#125; from &quot;@/types&quot;;export const httpClient = new HttpClient();export const abortControl = httpClient.createAbortController();export const get = (url: string, params?: Record&lt;string, number | string&gt;, options: IRequestData = &#123; method: &#x27;GET&#x27; &#125;): Promise&lt;IApiResponse&gt; =&gt; &#123; let request_url = url; if (params) &#123; request_url += &#x27;?&#x27; Object.entries(params).forEach(([key, value]) =&gt; &#123; request_url += `$&#123;key&#125;=$&#123;value&#125;`; &#125;) &#125; return httpClient.fetch(request_url, options);&#125;;export const post = (url: string, options: IRequestData) =&gt; &#123; return httpClient.fetch(url, options);&#125;;","categories":[],"tags":[{"name":"Fetch","slug":"Fetch","permalink":"http://hashzzz.github.io/tags/Fetch/"}]},{"title":"cssé¢è¯•é¢˜","slug":"css","date":"2023-05-11T13:48:41.000Z","updated":"2023-05-11T12:14:38.313Z","comments":true,"path":"2023/05/11/css/","link":"","permalink":"http://hashzzz.github.io/2023/05/11/css/","excerpt":"","text":"flexflex-directionå†³å®šä¸»è½´çš„çš„æ’åˆ—æ–¹å‘ row/column -reverse row(é»˜è®¤) columnå‚ç›´æ–¹å‘çš„æ’åˆ—flex-wrapnowrap wrap wrap-reverse æ¢è¡Œflex-flowwrapå’Œdirectionçš„åˆå¹¶ row å’Œ nowrapæ˜¯é»˜è®¤å€¼justify-contentä¸»è½´æ–¹å‘çš„æ’åˆ—å¯¹é½æ–¹å¼align-itemsäº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å‘é¡¹ç›®çš„å±æ€§order æ’åºå±æ€§ è¶Šå°è¶Šé å‰flex-grow æ”¾å¤§æ¯”ä¾‹flex-shrinkç¼©å°æ¯”ä¾‹align-self è‡ªèº«çš„æ’åˆ—æ–¹å¼","categories":[],"tags":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"http://hashzzz.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"}]},{"title":"JSé¢è¯•é¢˜","slug":"js-better","date":"2023-05-08T13:48:41.000Z","updated":"2023-05-10T13:12:25.403Z","comments":true,"path":"2023/05/08/js-better/","link":"","permalink":"http://hashzzz.github.io/2023/05/08/js-better/","excerpt":"","text":"JSé¢è¯•é¢˜1ã€JSçš„æ•°æ®ç±»å‹ï¼Œå€¼æ˜¯å¦‚ä½•å­˜å‚¨çš„ åŸºç¡€ç±»å‹ï¼š string number boolean Symbolå¤æ‚ç±»å‹å€¼ï¼š Object Array null undefined åŸºç¡€ç±»å‹å€¼å­˜å‚¨åœ¨æ ˆä¸­ï¼Œå¼•ç”¨ç±»å‹å€¼å­˜åœ¨å †ä¸­ï¼ŒæŒ‡é’ˆå­˜å‚¨åœ¨æ ˆä¸­ï¼ŒæŒ‡é’ˆæŒ‡å‘å †ä¸­çš„åœ°å€ 2ã€nullå’Œundefinedçš„åŒºåˆ«undefinedåå‘äºæœªå®šä¹‰ï¼Œnullè¡¨ç¤ºæ˜¯ç©ºå¯¹è±¡å½“å˜é‡å£°æ˜æ²¡å®šä¹‰çš„æ—¶å€™å°±æ˜¯undefinedï¼Œtypeof null è¾“å‡ºobject,è€Œtypeof undefinedä¸ºundefined 3ã€valueOfå’ŒtoString()ï¼Œè¿™ä¿©æ–¹æ³•éƒ½æ˜¯javascriptå†…ç½®çš„å–å€¼æ–¹æ³• toStringè¿”å›çš„æ˜¯å­—ç¬¦ä¸²ï¼Œè€ŒvalueOfè¿”å›çš„æ˜¯åŸå§‹å€¼ï¼Œnullå’Œundefinedéƒ½æ²¡æœ‰è¿™ä¸¤ä¸ªæ–¹æ³• {} valueOf ç»“æœä¸º {} åŸå§‹å€¼[] valueOf ç»“æœä¸º [] åŸå§‹å€¼{} toString ç»“æœä¸º â€˜[object Object]â€™[] toString ç»“æœä¸º â€˜â€™; 4ã€javascriptçš„ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾ ä½œç”¨åŸŸæ˜¯å®šä¹‰å˜é‡çš„åŒºåŸŸï¼Œä¹Ÿæ˜¯è¯æ³•ä½œç”¨åŸŸï¼Œåœ¨è¿™ä¸ªåŒºåŸŸå†…å†³å®šäº†å˜é‡å’Œå…¶ä»–èµ„æºçš„å¯è§æ€§åœ¨å‡½æ•°å†…éƒ¨å¯ä»¥å‘çˆ¶çº§è®¿é—®å˜é‡ï¼Œè€Œå‡½æ•°å¤–éƒ¨ä¸èƒ½è®¿é—®å‡½æ•°å†…éƒ¨çš„å€¼ç”±è¿™ç§å…³ç³»ç»„æˆçš„é“¾æ¡å°±å«ä½œç”¨åŸŸé“¾ 5ã€ä»€ä¹ˆæƒ…å†µä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Ÿå…¨å±€å˜é‡ã€é—­åŒ…ã€é—å¿˜çš„å®šæ—¶å™¨ 6ã€ES6æ–°å¢äº†å“ªäº›ä¸œè¥¿ Promiseã€ç®­å¤´å‡½æ•°ã€ç±»ã€è§£æ„èµ‹å€¼ã€letã€constå£°æ˜ã€Symbolã€Mapã€Setã€æ¨¡æ¿å­—ç¬¦ä¸²ã€æ¨¡å—åŒ–ã€Proxyã€å‡½æ•°é»˜è®¤å‚æ•°ã€ç‚¹è¿ç®—ç¬¦","categories":[],"tags":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"http://hashzzz.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"}]},{"title":"Vueé¢è¯•é¢˜","slug":"vue-better","date":"2023-05-08T13:48:41.000Z","updated":"2023-05-08T14:04:50.314Z","comments":true,"path":"2023/05/08/vue-better/","link":"","permalink":"http://hashzzz.github.io/2023/05/08/vue-better/","excerpt":"","text":"Vueé¢è¯•é¢˜1ã€v-ifå’Œv-showçš„é¢‘ç¹åˆ‡æ¢ï¼Œåˆ©ç”¨å…¶ç¼“å­˜ç‰¹æ€§ï¼Œé¦–å±ä½¿ç”¨v-if2ã€åˆ—è¡¨æ ‡è®°key3ã€æ•°æ®å“åº”å¼å¤„ç†ï¼Œå¦‚æœä¸éœ€è¦å“åº”å¼å¤„ç†çš„æ•°æ®å¢åŠ Object.freeze4ã€è·¯ç”±å¼‚æ­¥åŠ è½½5ã€UIç»„ä»¶åº“æŒ‰éœ€å¼•å…¥6ã€æŠ½ç¦»å…¬å…±ä»£ç ï¼Œä½¿ç”¨mixin Vueç»„ä»¶é€šä¿¡çš„æ–¹æ³• 1ã€é€šè¿‡props2ã€ç”¨è¿‡$bus $emitè§¦å‘è‡ªå®šä¹‰äº‹ä»¶3ã€ä½¿ç”¨$ref4ã€ä½¿ç”¨$parentå’Œ$children5ã€ä½¿ç”¨attrså’Œ$listeners6ã€Providerå’ŒInject7ã€Vuex8ã€V-modelå’Œ$emit update Vueä¸­$nextTickæ€ä¹ˆç”¨çš„ï¼Œå®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ $nextTickç”¨äºDomæ›´æ–°æ›´æ–°ç»“æŸåæ‰§è¡Œçš„å›è°ƒï¼Œä¿®æ”¹æ•°æ®åç«‹åˆ»è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥è·å–æ›´æ–°åçš„Domï¼Œåœ¨createdä¸­è®¿é—®DOMå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³• å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶,Vueå°†å›è°ƒæ”¾å…¥å¼‚æ­¥æ›´æ–°é˜Ÿåˆ—ï¼Œç­‰é˜Ÿåˆ—ä¸­æ‰€æœ‰çš„æ•°æ®å˜åŒ–å®Œåå†ç»Ÿä¸€æ›´æ–°ï¼Œä¸ç„¶æ¯æ¬¡æ›´æ–°æ•°æ®éƒ½ä¼šè§¦å‘æ›´æ–°å…·ä½“ä»£ç  12345678910111213141516171819202122232425262728293031const callbacks = []let pending = falseexport function nextTick (cb?: Function, ctx?: Object) &#123; let _resolve // ç”¨ callbacks æ•°ç»„å­˜å‚¨ç»è¿‡åŒ…è£…çš„ cb å‡½æ•° callbacks.push(() =&gt; &#123; if (cb) &#123; // ç”¨ try catch åŒ…è£…å›è°ƒå‡½æ•°ï¼Œä¾¿äºé”™è¯¯æ•è· try &#123; cb.call(ctx) &#125; catch (e) &#123; handleError(e, ctx, &#x27;nextTick&#x27;) &#125; &#125; else if (_resolve) &#123; _resolve(ctx) &#125; &#125;) if (!pending) &#123; pending = true // æ‰§è¡Œ timerFuncï¼Œåœ¨æµè§ˆå™¨çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼ˆé¦–é€‰å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼‰æ”¾å…¥ flushCallbacks å‡½æ•° timerFunc() &#125; // $flow-disable-line if (!cb &amp;&amp; typeof Promise !== &#x27;undefined&#x27;) &#123; return new Promise(resolve =&gt; &#123; _resolve = resolve &#125;) &#125;&#125; è™šæ‹ŸDOMæ˜¯ä»€ä¹ˆï¼Ÿ è™šæ‹ŸDomå®é™…ä¸Šæ˜¯æŠŠDomèŠ‚ç‚¹çš„attributesã€Eventã€Contentç­‰ç­‰ä»¥å¯¹è±¡çš„å½¢å¼å‚¨å­˜ï¼Œé€šè¿‡Compilerå°†å¯¹è±¡è½¬åŒ–ä¸ºHTMlç»“æ„çš„ ä¸ºä»€ä¹ˆç»„ä»¶çš„dataå±æ€§æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸æ˜¯å¯¹è±¡ æˆ‘ä»¬é€šè¿‡Vue.componentåˆ›å»ºå¤šä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œå¦‚æœdataæ˜¯ä¸€ä¸ªå±æ€§ï¼Œé‚£ä¹ˆå°±ä¼šå…±ç”¨è¿™ä¸ªdataï¼Œä¿®æ”¹Aä¹Ÿä¼šå½±å“Bï¼Œå½“ä½¿ç”¨function return dataçš„æ—¶å€™ï¼Œå°±éš”ç»äº†ç›¸äº’ä¹‹é—´çš„å½±å“ Vueçš„åˆå§‹åŒ–è¿‡ç¨‹ä½ æœ‰äº†è§£è¿‡å—ï¼Ÿåšè¿‡å“ªäº›äº‹æƒ… ç¬¬ä¸€æ­¥æ˜¯æ¥æ”¶ç”¨æˆ·è‡ªå®šä¹‰çš„ä¸€äº›é…ç½®ï¼Œå’ŒVueè‡ªå·±å®šä¹‰çš„ä¸€äº›ç­–ç•¥è¿›è¡Œåˆå¹¶ç¬¬äºŒæ­¥æ˜¯åˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸã€äº‹ä»¶ã€dataã€propsã€computedã€watcherã€è°ƒç”¨å‘¨æœŸé’©å­ç¬¬ä¸‰æ­¥ï¼šä½¿ç”¨$mountæŒ‚è½½","categories":[],"tags":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"http://hashzzz.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"}]},{"title":"vue-v3","slug":"vue3-proxy","date":"2023-05-06T03:26:44.000Z","updated":"2023-05-08T12:53:02.892Z","comments":true,"path":"2023/05/06/vue3-proxy/","link":"","permalink":"http://hashzzz.github.io/2023/05/06/vue3-proxy/","excerpt":"","text":"Vue2ä¸Vue3å“åº”å¼åŸç†Vue2çš„å“åº”å¼æ ¸å¿ƒæ˜¯ä½¿ç”¨Object.definePropertyåŠ«æŒå¯¹è±¡ï¼Œç„¶åè¿›è¡Œæ·±åº¦éå†ï¼Œç»™æ¯ä¸ªå±æ€§è®¾ç½®setterå’Œgetterï¼ŒVue3ä½¿ç”¨proxyå¯¹è±¡é‡å†™å“åº”å¼ï¼Œé€šè¿‡Reflectå¯¹æºå¯¹è±¡çš„å±æ€§è¿›è¡Œæ“ä½œ 1234567891011121314151617181920function defineReactive(obj, key, val) &#123; const dep = new Dep(); Object.defineProperty(obj, key, &#123; get() &#123; const value = val; // è§¦å‘getterçš„æ—¶å€™æ”¶é›†ä¾èµ– if (Dep.target) &#123; dep.depend(); &#125; return value; &#125;, set(newVal) &#123; val = newVal; // è°ƒç”¨setterçš„æ—¶å€™è°ƒç”¨depçš„notifyé€šçŸ¥ä¾èµ–æ›´æ–° dep.notify(); &#125;, &#125;);&#125; 1234567891011new Proxy(data, &#123; get (target, prop) &#123; return Reflect.get(target, prop); &#125;, set(target, prop, value) &#123; return Reflect.set(target, prop, value); &#125; deleteProperty(target, prop) &#123; return Reflect.deleteProperty(target, prop); &#125;&#125;)","categories":[],"tags":[{"name":"Vue3","slug":"Vue3","permalink":"http://hashzzz.github.io/tags/Vue3/"}]},{"title":"mock-server","slug":"mock-server","date":"2022-06-14T13:22:59.000Z","updated":"2022-06-18T04:11:36.326Z","comments":true,"path":"2022/06/14/mock-server/","link":"","permalink":"http://hashzzz.github.io/2022/06/14/mock-server/","excerpt":"","text":"åœ¨CRAä¸­åˆ›å»ºä¸€ä¸ªmock-serverçš„æ¥å£æœåŠ¡ï¼Œç›®çš„ä¸ºäº†åœ¨ç¦»çº¿çŠ¶æ€ä¸‹å¯åŠ¨ï¼Œèƒ½å¤Ÿè°ƒç”¨æœ¬åœ°çš„JSONæ–‡ä»¶ ç¬¬ä¸€æ­¥åŒºåˆ†ç¯å¢ƒå˜é‡æˆ‘ä»¬éœ€è¦å°†ç¦»çº¿ç¯å¢ƒå’Œæ­£å¸¸ç½‘ç»œç¯å¢ƒåŒºåˆ†å¼€æ¥ 12345678// ä½¿ç”¨äº†cross-envåŒ…åŒºåˆ† ç§‘æ™®// npm i cross-env -D// REACT_APP å¼€å¤´çš„å¯ä»¥è¢«è¯†åˆ«&quot;start&quot;: &quot;cross-env REACT_APP_ENV=DEVELOPMENT react-app-rewired start&quot;&quot;local&quot;: &quot;cross-env REACT_APP_ENV=LOCAL react-app-rewired start&quot; é…ç½®æ–‡ä»¶ä½¿ç”¨overridesæ–‡ä»¶çš„æ–¹æ³•mergeOptionsåˆ°webpack.config.jsé‡Œé¢å»æ‰§è¡Œnpm i customize-cra -Dåœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºconfig-overrides.jsæ–‡ä»¶ 12345678910//config.overrides.jsconst &#123; overrideDevServer &#125; = require(&#x27;customize-cra&#x27;);const devServerConfig = () =&gt; (config) =&gt; &#123; return config;&#125;module.exports = &#123; devServer: overrideDevServer(devServerConfig()),&#125;; æ€è·¯ç†ä¸€ç†1ã€æ ¹æ®ç¯å¢ƒéå†åŒºåˆ†æ˜¯ç¦»çº¿æ¨¡å¼ï¼ˆè°ƒç”¨æœ¬åœ°JSON) åœ¨çº¿æ¨¡å¼ï¼ˆmiddlewareè°ƒç”¨æ¥å£ï¼‰2ã€ç¦»çº¿æ¨¡å¼=&gt;è°ƒç”¨æ¥å£=&gt;è¯»å–æœ¬åœ°JSON3ã€åœ¨çº¿æ¨¡å¼=&gt;è°ƒç”¨æ¥å£=&gt;è·å–è¿”å›æŠ¥æ–‡å†™å…¥JSON 12345678910111213const fs = require(&#x27;fs-extra&#x27;);const path = require(&#x27;path&#x27;);const fetch = require(&#x27;node-fetch&#x27;);const bodyParser = require(&#x27;body-parser&#x27;);const packageData = require(&#x27;./package.json&#x27;);const &#123; overrideDevServer &#125; = require(&#x27;customize-cra&#x27;);const currHost = &#x27;http://localhost:3000&#x27;;let proxyTarget;if (process.env.REACT_APP_ENV === &#x27;DEVELOPMENT&#x27;) &#123; proxyTarget = packageData.proxy;&#125;","categories":[],"tags":[]},{"title":"vue-array","slug":"vue-array","date":"2022-05-29T12:08:10.000Z","updated":"2022-05-29T12:36:31.895Z","comments":true,"path":"2022/05/29/vue-array/","link":"","permalink":"http://hashzzz.github.io/2022/05/29/vue-array/","excerpt":"","text":"Vueæ•°ç»„æ˜¯æ€ä¹ˆå®ç°å“åº”å¼çš„Vue2ä¸­ å“åº”å¼æ˜¯é€šè¿‡Object.defineProperty(target,key config)æ–¹æ³•ï¼Œåœ¨getterå’Œsetterä¸­æ·»åŠ ä¾èµ–å’Œç›‘å¬æ¥å®ç°å“åº”å¼çš„ï¼Œä½†æ˜¯åœ¨æ•°ç»„ä¸­å¯¹ä¸‹æ ‡è¿›è¡Œä¿®æ”¹æ— æ³•è§¦å‘å“åº”å¼ å®˜ç½‘ï¼šVue ä¸èƒ½æ£€æµ‹ä»¥ä¸‹æ•°ç»„çš„å˜åŠ¨ï¼šå½“ä½ åˆ©ç”¨ç´¢å¼•ç›´æ¥è®¾ç½®ä¸€ä¸ªæ•°ç»„é¡¹æ—¶ï¼Œä¾‹å¦‚ï¼švm.items[indexOfItem] = newValueå½“ä½ ä¿®æ”¹æ•°ç»„çš„é•¿åº¦æ—¶ï¼Œä¾‹å¦‚ï¼švm.items.length = newLength Vue2ä¸­é‡å†™äº†push,pop,shift,unshift,splice,sort,reverse ä½¿å¾—æ•°ç»„æ”¹å˜æ—¶èƒ½å¤Ÿè§¦å‘å“åº”å¼ï¼ŒæŠŠåŸå…ˆArray.prototypeè¿›è¡Œå¤‡ä»½ï¼Œå†è¿›è¡Œé‡å†™ 123456789101112131415161718192021222324252627const methodsNeedChange = [&#x27;push&#x27;,&#x27;pop&#x27;,&#x27;unshift&#x27;,&#x27;shift&#x27;,&#x27;sort&#x27;,&#x27;reverse&#x27;,&#x27;splice&#x27;]methodsNeedChange.forEach(item =&gt; &#123; const original = Array.prototype[item] def(Array,prototype, item, function()&#123; const result = original.apply(this, arguments); const args = [...arguments]; const ob = this.__ob__; let inserted = []; // åˆ¤æ–­ç±»å‹ switch(item) &#123; case &#x27;push: case &#x27;unshift&#x27;: inserted = arguments; break; case &#x27;splice&#x27;: inserted = args.slice(2); break; if(inserted) &#123; ob.observerArray(inserted); &#125; return result; &#125; &#125;, false)&#125;) é€šè¿‡Vue.$set(Array,index,value)ä¹Ÿå¯ä»¥ç»™æ•°ç»„å“åº”å¼çš„æ·»åŠ é¡¹ç›® é€šè¿‡spliceæ–¹æ³•è®¾ç½®æ•°ç»„é•¿åº¦ï¼švm.items.splice(newLength)","categories":[],"tags":[{"name":"VueåŸç†","slug":"VueåŸç†","permalink":"http://hashzzz.github.io/tags/Vue%E5%8E%9F%E7%90%86/"}]},{"title":"vue-v3","slug":"vue-v3","date":"2022-05-29T03:26:44.000Z","updated":"2023-05-08T13:02:10.967Z","comments":true,"path":"2022/05/29/vue-v3/","link":"","permalink":"http://hashzzz.github.io/2022/05/29/vue-v3/","excerpt":"","text":"Vue2è¿ç§»V3 â€”ä¸Š1ã€$set $delete å“åº”å¼API 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051//V2ä¸­ ä½¿ç”¨Vue.$setæ¥ä¸ºå¯¹è±¡å“åº”å¼æ·»åŠ å€¼Vue.$set(target,key,value);//V3ä¸­ ç”±äºä½¿ç”¨äº†new Proxyå®ç°å“åº”å¼import &#123; ref, reactive, customRef &#125; from &#x27;vue&#x27;;const target = ref(0);target.value ++ ;const state = reactive(&#123; name: &#x27;burning&#x27;&#125;)state.name = &#x27;rotk&#x27;;// å…¶ä»–çš„ä¸€äº›api // shallowReactiveåªä¿ç•™è‡ªèº«Property ä¸å¾€ä¸‹é€’å½’æ·»åŠ ç›¸åº” shallowReactive(target)// toRaw è§£é™¤å“åº”å¼ // markRow æ ‡è®°å¯¹è±¡ï¼Œæ ‡è®°åä¸ä¼šè¢«æ·»åŠ ä¸ºå“åº”å¼å¯¹è±¡// unref åˆ¤æ–­å¯¹è±¡æ˜¯å¦ref æ˜¯refè¿”å›.value å¦åˆ™è¿”å›å¯¹è±¡// toRef å’Œ toRefs å°†reactiveä¸­çš„propertyè½¬åŒ–ä¸ºrefå¯¹è±¡// customRef è¿™ä¸ªæŒºå¥½ç”¨çš„ åˆ›å»ºè‡ªå®šä¹‰refå¹¶å¯¹ä¾èµ–é¡¹è¿›è¡Œæ˜¾ç¤ºæ§åˆ¶æ¥å—trackå’Œtriggerï¼Œå¹¶è¿”å›å¸¦æœ‰getå’Œsetçš„å¯¹è±¡// Vue2 ä¸­å¦‚æœè¦æ·»åŠ debounceï¼Œå¾—ç”¨åŒ¿åå‡½æ•°åŒ…è£¹const debounceRef = (value, delay) =&gt; &#123; let timer; return customRef((track, trigger) =&gt; &#123; return &#123; get()&#123; track(); return value; &#125;, set(newVal)&#123; clearTimeout(timer); timer = setTimeout(() =&gt; &#123; value = newVal; trigger(); &#125;, delay); &#125; &#125; &#125;)&#125;// triggerRef(target) æ‰‹åŠ¨è§¦å‘watchEffectçš„äº‹ä»¶watchEffect(() =&gt; &#123; console.log(&#x27;hello,world&#x27;)&#125;)triggerRef(target); Composition APIç®—æ˜¯æ”¹åŠ¨æ¯”è¾ƒå¤§çš„äº† 123456789101112131415161718192021222324252627282930313233// defineComponentå†™æ³•export default defineComponent(&#123; setup(props, context)&#123; context.attrs context.slots context.emit // è¿™ä¸ªç”¨æ¥æš´éœ²æ–¹æ³•å’Œå±æ€§ç»™å¤–éƒ¨è°ƒç”¨ // å¦‚æœæ²¡æœ‰å®šä¹‰expose é€šè¿‡refè·å–å°±æ˜¯setup å¯¹åº”return // å¦‚æœå®šä¹‰äº†expose é€šè¿‡refè·å–çš„å°±æ˜¯exposeçš„å†…å®¹ ä¼šè¦†ç›–return context.expose &#125;&#125;)// export å†™æ³•export default &#123; setup()&#123; &#125;&#125;// scriptå†™æ³•&lt;script setup lang=&#x27;ts&#x27;&gt; const props = defineProps(&#123;&#125;) const emits = defineEmtis([&#x27;click&#x27;]) const expose = defineExpose(&#123;&#125;) // typescriptä¸­æ¥å—éœ€è¦è°ƒç”¨withDefaults const props = withDefaults(defineProps&lt;Props&gt;(), &#123; // è¿™é‡Œæ˜¯props &#125;)&lt;/script&gt; ä»ç”Ÿå‘½å‘¨æœŸæ¥çœ‹ setupåœ¨beforeCreatedå’Œcreatedä¹‹å‰ï¼Œ Vue3åˆ é™¤äº†beforeCreateå’Œcreatedï¼Œåœ¨setupä¸­thisä¹Ÿä¸ä¼šæŒ‡å‘ç»„ä»¶å®ä¾‹ setupå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯propsï¼Œçˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„å‚æ•°ï¼Œä½†æ˜¯ä¸èƒ½ä½¿ç”¨ç›´æ¥è§£æ„å–å€¼ï¼Œå¦åˆ™ä¼šä¸¢å¤±å“åº”å¼ï¼Œéœ€è¦é€šè¿‡toRefs defineAsyncComponentå®˜æ–¹è§£é‡Šï¼šåˆ›å»ºä¸€ä¸ªåªæœ‰åœ¨éœ€è¦æ—¶æ‰ä¼šåŠ è½½çš„å¼‚æ­¥ç»„ä»¶ã€‚ 12345678910111213import &#123; defineAsyncComponent &#125; from &#x27;vue&#x27;const AsyncComp = defineAsyncComponent(() =&gt; import(&#x27;./components/AsyncComponent.vue&#x27;))//å¸¦é…ç½®çš„const AsyncComp = defineAsyncComponent(&#123; loader: () =&gt; import (&#x27;./components/AsyncComponent.vue&#x27;), loadingComponent: LoadingComponent, errorComponent: ErrorComponent, delay: 200, timeout: 3000&#125;) Provide/Injectçˆ¶å­ç»„ä»¶ä¼ å‚ï¼Œä¹Ÿå¯ä»¥æ›¿ä»£prototypeï¼Œprovideå’Œinjectè®¾è®¡æ˜¯éå“åº”å¼çš„ï¼Œå½“ç„¶ï¼Œå¦‚æœä¼ é€’äº†å¸¦å“åº”å¼çš„æ•°æ®æ—¶ï¼Œæ¥æ”¶åˆ°çš„ä¹Ÿæ˜¯å“åº”å¼çš„ getCurrentInstanceVue3ä¸­åˆ é™¤äº†æš´éœ²åœ¨prototypeä¸Šçš„æ–¹æ³•ï¼Œæä¾›äº†globalPropertiesä½†æ˜¯Vue3æ–‡æ¡£ä¸­ 12345678//getCurrentInstance åªæš´éœ²ç»™é«˜é˜¶ä½¿ç”¨åœºæ™¯ï¼Œå…¸å‹çš„æ¯”å¦‚åœ¨åº“ä¸­ã€‚å¼ºçƒˆåå¯¹åœ¨åº”ç”¨çš„ä»£ç ä¸­ä½¿ç”¨ getCurrentInstanceã€‚è¯·ä¸è¦æŠŠå®ƒå½“ä½œåœ¨ç»„åˆå¼ API ä¸­è·å– this çš„æ›¿ä»£æ–¹æ¡ˆæ¥ä½¿ç”¨ã€‚// main.tsapp.config.globalProperties.$xxx;const currInstance = getCurrentInstance();currInstance.$xxx(); CompositionAPIæ–°å¢compositionAPIï¼Œä»£ç é€»è¾‘æ›´åŠ æ¸…æ™° 1234567&lt;script setup&gt;import &#123; ref, reactive &#125; from &#x27;vue&#x27;;const count = ref(0);const state = reactive(&#123; name: &#x27;Jack&#x27; &#125;);&lt;/script&gt;","categories":[],"tags":[{"name":"Vue3","slug":"Vue3","permalink":"http://hashzzz.github.io/tags/Vue3/"}]},{"title":"clouse","slug":"clouse","date":"2022-05-29T02:08:20.000Z","updated":"2022-05-29T02:26:00.353Z","comments":true,"path":"2022/05/29/clouse/","link":"","permalink":"http://hashzzz.github.io/2022/05/29/clouse/","excerpt":"","text":"é—­åŒ…è°ˆåˆ°é—­åŒ… æˆ‘ç†è§£åº”è¯¥å…ˆä»jsçš„ä½œç”¨åŸŸå¼€å§‹è¯´èµ·ï¼Œç”±äºJSæ˜¯è¯æ³•ä½œç”¨åŸŸå‡½æ•°å£°æ˜çš„æ—¶å€™ç›¸å…³çš„ä¸Šä¸‹æ–‡ç¯å¢ƒå·²ç»ç¡®å®šè€Œç”±äºä½œç”¨åŸŸçš„ç‰¹æ€§ï¼ˆæ ˆå†…å­˜ï¼‰ï¼Œå‡½æ•°å¯ä»¥å‘ä¸Šè®¿é—®ä½œç”¨åŸŸï¼Œä½†æ˜¯ä¸èƒ½å‘ä¸‹è®¿é—®è¿™ä¸ªæ—¶å€™é€šè¿‡å‡½æ•°å†…éƒ¨åµŒå¥—å‡½æ•°å°†ä½œç”¨åŸŸä¸­ä¿å­˜çš„å†…å®¹(AO,VO)è¿”å›å‡ºæ¥ æˆ‘ç†è§£çš„é—­åŒ…ç”¨ä¸€å¥è¯æ¦‚æ‹¬é—­åŒ…å°±æ˜¯ä¿å­˜äº†å…¶ä»–å‡½æ•°ä½œç”¨åŸŸçš„å‡½æ•° ä½¿ç”¨é—­åŒ…åº”å½“æ³¨æ„ï¼Œç”±äºé—­åŒ…ä¿å­˜åœ¨å †å†…å­˜ä¸­ï¼Œé¿å…å†…å­˜æ³„æ¼åº”å½“æ‰‹åŠ¨æ¸…é™¤ å·¥ä½œä¸­å¸¸è§çš„é—­åŒ…ä½¿ç”¨åœºæ™¯ï¼šé˜²æŠ–èŠ‚æµä¸­å°†setTimeout å®šæ—¶å™¨è¿”å›å‡ºæ¥é¿å…æ¸…é™¤","categories":[],"tags":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"http://hashzzz.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"}]},{"title":"Typescript","slug":"typescript","date":"2022-05-29T02:08:20.000Z","updated":"2023-03-20T13:18:45.730Z","comments":true,"path":"2022/05/29/typescript/","link":"","permalink":"http://hashzzz.github.io/2022/05/29/typescript/","excerpt":"","text":"Typescriptä¸€ç›´æ²¡æœ‰ç³»ç»Ÿçš„å­¦ä¹ TSï¼Œè¾¹å·¥ä½œè¾¹å­¦ä¹ ï¼Œä»Šå¤©æŠ½ç©ºæ•´ç†ä¸€ä¸‹APi 12345678910111213141516171819202122232425262728293031323334353637383940// åŸºç¡€ç±»å‹const status: boolean = true;const count: number = 0;const name: string: &#x27;é»‘è‰²æŸ³ä¸&#x27;;const uni: undefined = undefined;const nul: null = nullconst any: any = &#x27;&#x27; // anyç±»å‹ ä¸unknownç±»å‹ä¸€æ ·const unknown: unknown = ??? // Enum ç±»å‹ ä¸€èˆ¬ç”¨æ¥åˆ›å»ºæ•°å€¼é›†åˆ åˆå§‹å€¼ä¸º0ï¼Œå…¶ä½™æˆå‘˜æŒ‰é¡ºåºè‡ªåŠ¨å¢é•¿enum List &#123; Apple, Pitch, Watermelon&#125;const apple: List = List.Apple; // 0//å¦‚æœåŠ ä¸Š Apple = 10 const pitch: List = List.Pitch; // 1//å¦‚æœå®šä¹‰å­—ç¬¦ä¸²æšä¸¾ç±»enum Animal &#123; DOG = &#x27;ç‹—&#x27; CAT = &#x27;çŒ«&#x27;&#125;const dog: Animal = Animal.DOG; // ç‹—// å¦‚æœå®šä¹‰ç”±è¿™äº›å¸¸é‡ç»„æˆçš„æ•°ç»„ç±»å‹åˆ™ç”¨ä»¥ä¸‹æ–¹å¼const strs: string[] = [];const animals: Animal[] = [Animal.DOG, Animal.CAT]; // [ç‹—ï¼ŒçŒ«]// neverç±»å‹ è¡¨ç¤ºé‚£äº›ç”¨ä¸å­˜åœ¨çš„å€¼ åˆšå¼€å§‹è¢«ä»–æŠ˜ç£¨çš„æ­»å»æ´»æ¥çš„ ä¸€èˆ¬ç”¨æ¥æŠ›å‡ºå¼‚å¸¸// void ç±»å‹ ä¸€èˆ¬ç”¨æ¥æ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°function init(): void &#123; this.mounted();&#125; 123456789101112131415161718192021222324// å¯¹è±¡ç±»å‹class Animal &#123; type: string; constructor(age: number, type: string) &#123; this.type = type; this.age = age; &#125; cry(): void &#123; console.log(&#x27;5555555&#x27;); &#125;&#125;const animals: Array&lt;Animal&gt; = [];const animals: Animal[] = [];interface Animal &#123; type: string; name: string; age: number;&#125;type name = stringtype Animal = &#123; name: name; age: number &#125; 123456789101112131415161718192021222324// ç±»å‹æ–­è¨€const str: string = &#x27;abc&#x27;;const strLength: number = (&lt;string&gt;str).length;const strLength: number = (str as string ).length;// å¤šç§ç±»å‹let FollowStatus: string | undefined | null ;// ç±»å‹åˆå¹¶interface Animal &#123; name: string,&#125;interface Fish &#123; age: number,&#125;let that: Animal &amp; Fish = &#123; name: &#x27;ä¸¤æ –åŠ¨ç‰©&#x27;, age: 1&#125; é«˜é˜¶ç”¨æ³•æœªå®Œå¾…ç»­","categories":[],"tags":[{"name":"typescript","slug":"typescript","permalink":"http://hashzzz.github.io/tags/typescript/"}]},{"title":"prototype","slug":"prototype","date":"2022-05-28T13:19:51.000Z","updated":"2022-05-29T02:07:45.343Z","comments":true,"path":"2022/05/28/prototype/","link":"","permalink":"http://hashzzz.github.io/2022/05/28/prototype/","excerpt":"","text":"Prototype åŸå‹å’ŒåŸå‹é“¾åŸå‹å’ŒåŸå‹é“¾æˆ‘ç†è§£è¦ä»Newå…³é”®å­—è¯´èµ·æˆ‘ä»¬é€šè¿‡Newå…³é”®å­—åˆ›é€ å®ä¾‹ 1234// åˆ›é€ äº†ä¸€ä¸ªnewObject æˆ‘ä»¬æ‰“å°è¿™ä¸ªå¯¹è±¡çœ‹çœ‹const newObj = new Object(); Newé¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡æ‰§è¡Œæ„é€ å‡½æ•°é‡Œé¢çš„ä»£ç å¹¶ç»™å¯¹è±¡è®¾ç½®äº†prototypeç»‘å®šäº†thisåˆ°å¯¹è±¡ä¸Šï¼Œè®¾ç½®constructoræŒ‡å‘æ„é€ å‡½æ•°æœ€åæŠŠæ–°å¯¹è±¡è¿”å›å‡ºæ¥ æˆ‘ä»¬æ¥ç®€å•æ¨¡æ‹Ÿä¸€ä¸‹new 12345678910111213141516function myNew(target) &#123; const newTarget = Object.create(targetFn.prototype); // è·å–å‚æ•° const args = Array.from(arguments).slice(1); // ç»‘å®šthis const value = targetFn.apply(newTarget, args); // åˆ¤æ–­è¿”å›å€¼æ˜¯ä¸æ˜¯å¯¹è±¡ const targetType = Object.prototype.toString.call(value).slice(8, -1) if([&#x27;Function&#x27;, &#x27;Object&#x27;].includes(targetType)) &#123; return value; &#125; else &#123; return newTarget &#125;&#125; æ„é€ å‡½æ•°é€šè¿‡prototypeæŒ‡å‘åŸå‹å¯¹è±¡æ„é€ å‡½æ•°åˆ›é€ çš„å®ä¾‹é€šè¿‡__protot__è®¿é—®åŸå‹å¯¹è±¡prototypeåŸå‹å¯¹è±¡é€šè¿‡constructoræŒ‡å‘æ„é€ å‡½æ•°æ„é€ å‡½æ•°é€šè¿‡__proto__è®¿é—®Object.prototypeä¸Šçš„æ–¹æ³•Objectçš„prototypeéšå¼æŒ‡å‘nullè€ŒJSä¸­çš„ç»§æ‰¿å°±æ˜¯ä»¥å®ä¾‹çš„prototypeä½œä¸ºçˆ¶ç±»å‘ä¸‹ä¼ é€’çš„è¿™ç§é“¾å¼å…³ç³»æˆ‘ç†è§£å°±æ˜¯åŸå‹é“¾","categories":[],"tags":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"http://hashzzz.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"}]},{"title":"vue-router4-addRoute","slug":"vue-router4-addRoute","date":"2022-05-28T05:13:20.000Z","updated":"2022-05-28T13:17:55.399Z","comments":true,"path":"2022/05/28/vue-router4-addRoute/","link":"","permalink":"http://hashzzz.github.io/2022/05/28/vue-router4-addRoute/","excerpt":"","text":"Vue3æ­é…Vue-Router4 åŠ¨æ€æ·»åŠ è·¯ç”±è°ƒæ•´ Vue-Router4 åˆ é™¤äº†addRoutesæ–¹æ³•ï¼Œæä¾›äº†addRouteæ–¹æ³• 1234//æ·»åŠ ä¸€æ¡è·¯ç”±è®°å½• å¦‚æœè·¯ç”±æœ‰ä¸€ä¸ª nameï¼Œå¹¶ä¸”å·²ç»æœ‰ä¸€ä¸ªä¸ä¹‹åå­—ç›¸åŒçš„è·¯ç”±ï¼Œå®ƒä¼šå…ˆåˆ é™¤ä¹‹å‰çš„è·¯ç”±ã€‚ addRoute(parentName: string | symbol, route: RouteRecordRaw): () =&gt; void åœ¨ router.beforeEach ä¸­åˆ¤æ–­æƒé™å’Œä¿¡æ¯ä¹‹åï¼Œè°ƒç”¨addRouteæ–¹æ³• ä¸åŒçš„æ˜¯éœ€è¦é…ç½®ä¸€ä¸ªæ¡ä»¶ç”¨æ¥ç»“æŸå¾ªç¯ æ­é…ä»¥ä¸‹nextå†™æ³• 123 next(&#123;...to, replace: true &#125;) 1234567891011121314151617181920212223242526// æ·»åŠ 404åŒ¹é…let flag = false;router.beforeEach((to,from,next) =&gt; &#123; if(!flag) &#123; //å¼‚æ­¥ä»£ç å›è°ƒä¸­æ‰§è¡Œä»¥ä¸‹æ“ä½œ router.addRoute(&#123; path: &quot;/:catchAll(.*)*&quot;, name: &#x27;404&#x27;, component: () =&gt; import(&#x27;@/component&#x27;) &#125;) dynamicRoutes.forEach(route =&gt; &#123; router.addRoute(route.parent, route) &#125;) // åŠ¨æ€è·¯ç”±æ·»åŠ å®Œæˆåä¿®æ”¹flagï¼Œè¡¨æ˜å·²ç»æ·»åŠ å®Œæˆ æ­£å¸¸è°ƒç”¨nextæ–¹æ³• flag = true next(&#123; ...to, replace: true &#125;) &#125; else &#123; next() &#125;&#125;)","categories":[],"tags":[{"name":"Vue3","slug":"Vue3","permalink":"http://hashzzz.github.io/tags/Vue3/"}]},{"title":"task-context","slug":"task-context","date":"2022-05-22T14:09:31.000Z","updated":"2023-03-23T13:48:05.354Z","comments":true,"path":"2022/05/22/task-context/","link":"","permalink":"http://hashzzz.github.io/2022/05/22/task-context/","excerpt":"","text":"å¼‚æ­¥ä»»åŠ¡ä¸­å­˜åœ¨å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ æ‰§è¡Œé¡ºåº åŒæ­¥ä»»åŠ¡=&gt; å¼‚æ­¥ä»»åŠ¡ åŒæ­¥ä»£ç æ‰§è¡Œé‡è§å®ä»»åŠ¡ æ”¾å…¥å®ä»»åŠ¡é˜Ÿåˆ—é‡è§å¾®ä»»åŠ¡ æ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—å½“æ‰§è¡Œæ ˆä¸ºç©ºæ—¶å–å‡ºå¾®ä»»åŠ¡æ‰§è¡Œå¾®ä»»åŠ¡æ‰§è¡Œå®Œåå–å‡ºå®ä»»åŠ¡æ‰§è¡Œæ¯ä¸ªå®ä»»åŠ¡ä¹‹åä¼šæ£€æŸ¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ¸…ç©ºå¾®ä»»åŠ¡å†æ‰§è¡Œå®ä»»åŠ¡","categories":[],"tags":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"http://hashzzz.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"}]},{"title":"formComponent","slug":"form-component","date":"2022-05-19T13:48:41.000Z","updated":"2022-05-28T13:18:14.831Z","comments":true,"path":"2022/05/19/form-component/","link":"","permalink":"http://hashzzz.github.io/2022/05/19/form-component/","excerpt":"","text":"ä¸¤ç§å°è£…Formçš„æ–¹æ³•å¯¹æ¯” 1234567891011121314151617181920212223242526272829303132333435363738394041// å¸¸ç”¨æ•°æ®æº ç»„ä»¶åº“ç”¨çš„iview-designprops: &#123; formInits: [ &#123; type: &#x27;Input&#x27;, label: &#x27;æˆ‘æ˜¯æµ‹è¯•label1&#x27;, formKey: &#x27;name&#x27;, value: &#x27;&#x27;, attrs: &#123; placeholder: &#x27;æˆ‘æ˜¯æµ‹è¯•placeholder&#x27;, size: &#x27;small&#x27; &#125;, listeners: &#123; &#x27;on-change&#x27;: function(ev)&#123; console.log(_this.$refs.formWrapper.$refs.generateForm) &#125; &#125; &#125;, &#123; type: &#x27;Select&#x27;, label: &#x27;æˆ‘æ˜¯æµ‹è¯•label2-select&#x27;, formKey: &#x27;year&#x27;, value: &#x27;&#x27;, options: [ &#123; label: 2021, value: 2021 &#125;, &#123; label: 2022, value: 2022 &#125; ], attrs: &#123; placeholder: &#x27;è¯·é€‰æ‹©!!&#x27;, &#125; &#125;, ] &#125;&#125; ä½¿ç”¨templateè¯­æ³• 12345678&lt;Form ref=&quot;generateForm&quot; :model=&#x27;formState&#x27; :rules=&#x27;rules&#x27;&gt; &lt;FormItem :label=&#x27;item.label&#x27; :prop=&quot;item.formKey&quot; v-for=&quot;item in formInits&quot; :key=&#x27;item.formKey&#x27;&gt; &lt;Input v-if=&quot;item.type === &#x27;Input&#x27;&quot; type=&quot;text&quot; v-bind=&#x27;item.attrs&#x27; v-on=&quot;item.listeners&quot;&gt;&lt;/Input&gt; &lt;Select v-else-if=&quot;item.type === &#x27;Select&#x27;&quot; v-bind=&#x27;item.attrs&#x27; v-on=&quot;item.listeners&quot;&gt; &lt;Option v-for=&#x27;opt in item.options&#x27; :key=&#x27;opt.value&#x27; :value=&#x27;opt.value&#x27;&gt;&lt;/Option&gt; &lt;/Select&gt; &lt;/FormItem&gt;&lt;/Form&gt; ä½¿ç”¨renderè¯­æ³• 123456789101112131415161718192021222324252627282930313233343536373839// è¿™é‡Œæ›´åŠ æ¨èå®‰è£…JSX-loader å°±æ²¡æœ‰è¿™ä¹ˆç—›è‹¦render(createElement)&#123; const returnFormSlot = (&#123; type, options &#125;) =&gt; &#123; switch(type) &#123; case &#x27;Input&#x27;: break; case &#x27;Select&#x27;: return options &amp;&amp; options.map(option =&gt; &#123; return createElement(&#x27;Option&#x27;, &#123; props: &#123; key: option.value, value: option.value, &#125;, &#125;, option.label) &#125;) break; &#125; &#125; return createElement(&#x27;Form&#x27;, &#123; ref: &#x27;generateForm&#x27;, props: &#123; model: this.formState, rules: this.rules &#125; &#125;, this.formInits.map(item =&gt; &#123; return createElement(&#x27;FormItem&#x27;, &#123; props: &#123; label: item.label, prop: item.formKey, &#125; &#125;,[createElement(item.type, &#123; props: item.attrs, on: item.listeners &#125;, returnFormSlot(item) )]) &#125;) )&#125;","categories":[],"tags":[{"name":"Vue3","slug":"Vue3","permalink":"http://hashzzz.github.io/tags/Vue3/"}]}],"categories":[],"tags":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"http://hashzzz.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"},{"name":"Canvas","slug":"Canvas","permalink":"http://hashzzz.github.io/tags/Canvas/"},{"name":"Fetch","slug":"Fetch","permalink":"http://hashzzz.github.io/tags/Fetch/"},{"name":"Vue3","slug":"Vue3","permalink":"http://hashzzz.github.io/tags/Vue3/"},{"name":"VueåŸç†","slug":"VueåŸç†","permalink":"http://hashzzz.github.io/tags/Vue%E5%8E%9F%E7%90%86/"},{"name":"typescript","slug":"typescript","permalink":"http://hashzzz.github.io/tags/typescript/"}]}